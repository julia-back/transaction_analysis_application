# Приложение для анализа транзакций

## Содержание
###### Описание
###### Структура
###### Использование
###### Тестирование
###### Логирование

## Описание
Приложение для анализа транзакций, которые находятся в Excel-файле. 
Приложение генерирует JSON-данные для веб-страниц.
Приложение предоставляет следующие данные:

Главная страница. 
- Приветствие в формате «Доброе утро» / «Добрый день» / 
«Добрый вечер» / «Доброй ночи» в зависимости от текущего времени.
- По каждой карте: последние 4 цифры карты; общая сумма расходов;
кешбэк (1 рубль на каждые 100 рублей).
- Топ-5 транзакций по сумме платежа.
- Курс валют.
- Стоимость акций из S&P500.

Выгодные категории повышенного кешбэка 

- JSON с анализом, сколько на каждой категории можно заработать
кешбэка в указанном месяце года.

Траты по категории

- Траты по заданной категории за последние три месяца от 
переданной даты (по умолчанию от текущей даты).

## Структура

- модуль `views.py` с функцией главной страницы
- модуль `utils.py` со вспомогательными функциями
- модуль `services.py` с функцией анализа категорий выгодного кэшбека
- модуль `reports.py` с функцией отчета с тратами по категории
- модуль `main.py` с основной функцией, вызывающей функции других модулей

## Использование
Для установки необходимых зависимостей введите команду `poetry install`

Чтобы использовать свой Excel-файл для анализа транзакций, поместите его
в директорию data и измените название файла в модуле main.py

## Тестирование
Тесты с реализованным функциям находятся в директории tests.
Вы можете выполнить проверку, запустив фреймворк pytest и запустив инструмент
Code coverage с помощью команд:

`pytest --cov`
 — при активированном виртуальном окружении.
`poetry run pytest --cov`
 — через poetry.

## Логирование
Для модулей проекта реализованно логирование.

Логи сохраняются в корневой папке logs:
- в файле **logs.log**

Уровень логов установлен на `DEBUG`.

Формат записи лога в файл включает метку времени, название модуля, 
уровень серьезности и сообщение, описывающее событие или ошибку, которые 
произошли.

После каждого запуска файл с логами перезаписывается.